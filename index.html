<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Menu Brands - Cardápio Digital</title>
  <script src="https://cdn.jsdelivr.net/npm/papaparse@5.4.1/papaparse.min.js"></script>
  
  <style>
    :root {
      --vermelho-menu: #e30613;
      --vermelho-hover: #c4000f;
      --branco: #ffffff;
      --cinza-claro: #f8f9fa;
    }
    body {
      margin: 0;
      font-family: 'Segoe UI', Arial, sans-serif;
      background: var(--branco);
      color: #333;
      line-height: 1.6;
    }

    header {
      background: var(--vermelho-menu);
      color: white;
      text-align: center;
      padding: 20px 15px;
      box-shadow: 0 4px 15px rgba(227,6,19,0.3);
    }
    .logo-container {
      max-width: 320px;
      margin: 0 auto;
    }
    .logo-container img {
      width: 100%;
      height: auto;
    }

    .container {
      max-width: 1160px;
      margin: 30px auto;
      padding: 0 20px;
    }

    .filtros {
      background: white;
      padding: 22px;
      border-radius: 16px;
      box-shadow: 0 6px 20px rgba(0,0,0,0.08);
      margin-bottom: 35px;
      text-align: center;
      border: 3px solid var(--vermelho-menu);
    }
    .filtros label {
      font-weight: 700;
      color: var(--vermelho-menu);
      font-size: 1.15em;
      margin-right: 12px;
    }
    select, input {
      padding: 12px 16px;
      font-size: 1.05em;
      border: 2px solid #ddd;
      border-radius: 12px;
      margin: 8px;
    }
    select { width: 340px; }
    input {
      width: 420px;
      max-width: 100%;
      border-color: var(--vermelho-menu);
    }

    table {
      width: 100%;
      border-collapse: collapse;
      background: white;
      border-radius: 16px;
      overflow: hidden;
      box-shadow: 0 8px 25px rgba(227,6,19,0.12);
      border: 2px solid var(--vermelho-menu);
    }
    th {
      background: var(--vermelho-menu);
      color: white;
      padding: 18px 16px;
      text-align: left;
      font-size: 1.1em;
      font-weight: 600;
    }
    td { padding: 16px; border-bottom: 1px solid #eee; }
    tr:hover { background: #fff5f5; }
    .preco {
      font-weight: bold;
      color: var(--vermelho-menu);
      text-align: right;
      white-space: nowrap;
      font-size: 1.15em;
    }

    .categoria-tag {
      background: var(--vermelho-menu);
      color: white;
      padding: 8px 16px;
      border-radius: 30px;
      font-size: 0.85em;
      font-weight: bold;
      display: inline-block;
      max-width: 180px;
      overflow: hidden;
      text-overflow: ellipsis;
      white-space: nowrap;
      box-shadow: 0 3px 8px rgba(227,6,19,0.3);
    }
    .categoria-tag:hover {
      background: var(--vermelho-hover);
      overflow: visible;
      white-space: normal;
      max-width: none;
      padding: 12px 18px;
      z-index: 10;
      position: relative;
    }

    .sem-resultado {
      text-align: center;
      padding: 60px 20px;
      color: #888;
      font-size: 1.4em;
      background: white;
      border-radius: 16px;
      border: 2px dashed var(--vermelho-menu);
    }

    footer {
      text-align: center;
      padding: 40px;
      color: #666;
      font-size: 0.95em;
      margin-top: 50px;
    }
  </style>
</head>
<body>

  <header>
    <div class="logo-container">
      <img src="Menu.png" alt="Menu Brands">
    </div>
  </header>

  <div class="container">
    <div class="filtros">
      <label for="categoria">Filtrar por categoria:</label>
      <select id="categoria">
        <option value="">Tudo</option>
      </select>
      <input type="text" id="busca" placeholder=" Pesquisar produto ou descrição...">
    </div>

    <div id="resultado">
      <p style="text-align:center; color:#666; font-size:1.2em;">Carregando cardápio...</p>
    </div>
  </div>

  <footer>
    Menu Brands © 2025 — Cardápio sempre atualizado com carinho
  </footer>

  <script>
    let todosOsItens = [];

    function limparCategoria(txt) {
      if (!txt || txt.trim() === "") return "Outros";
      return txt.toString()
        .replace(/[\r\n\t\v\f]+/g, " ")
        .replace(/[^\w\s\-\(\)\+\&à-úÀ-Ú]/g, "")
        .replace(/\s+/g, " ")
        .replace(/:/g, "")
        .trim()
        .substring(0, 80);
    }

    Papa.parse("MenuFiltrado.csv", {
      download: true,
      header: true,
      skipEmptyLines: true,
      complete: function(results) {
        todosOsItens = results.data
          .filter(item => item["NOME CARDAPIO"] && item["NOME CARDAPIO"].trim())
          .map(item => ({
            ...item,
            CATEGORIA: limparCategoria(item.CATEGORIA)
          }));

        const categorias = [...new Set(todosOsItens.map(i => i.CATEGORIA))].sort();
        const select = document.getElementById("categoria");
        select.innerHTML = '<option value="">Tudo</option>';
        categorias.forEach(cat => {
          const opt = document.createElement("option");
          opt.value = cat;
          opt.textContent = cat;
          select.appendChild(opt);
        });

        mostrarItens(todosOsItens);
      }
    });

    function mostrarItens(itens) {
      const container = document.getElementById("resultado");
      if (itens.length === 0) {
        container.innerHTML = '<p class="sem-resultado">Nenhum produto encontrado.</p>';
        return;
      }

      let tabela = `
        <table>
          <thead>
            <tr>
              <th style="width:190px;">Categoria</th>
              <th>Nome no Cardápio</th>
              <th>Nome PDV</th>
              <th>Cód. PDV</th>
              <th style="width:110px;">Preço</th>
              <th>Descrição</th>
            </tr>
          </thead>
          <tbody>`;

      itens.forEach(p => {
        const preco = parseFloat(p["PREÇO VENDA CHEIO"]) || 0;
        tabela += `
          <tr>
            <td>
              <span class="categoria-tag" title="${p.CATEGORIA}">${p.CATEGORIA}</span>
            </td>
            <td><strong>${p["NOME CARDAPIO"] || ""}</strong></td>
            <td>${p["NOME PDV"] || ""}</td>
            <td>${p["CÓD PDV"] || ""}</td>
            <td class="preco">R$ ${preco.toFixed(2).replace(".",",")}</td>
            <td>${p["DESCRICAO ITEM CARDAPIO"] || ""}</td>
          </tr>`;
      });

      tabela += `</tbody></table>`;
      container.innerHTML = tabela;
    }

    document.getElementById("categoria").addEventListener("change", filtrar);
    document.getElementById("busca").addEventListener("input", filtrar);

    function filtrar() {
      let filtrados = todosOsItens;
      const cat = document.getElementById("categoria").value;
      const termo = document.getElementById("busca").value.toLowerCase().trim();

      if (cat) filtrados = filtrados.filter(i => i.CATEGORIA === cat);
      if (termo) {
        filtrados = filtrados.filter(i =>
          (i["NOME CARDAPIO"] || "").toLowerCase().includes(termo) ||
          (i["NOME PDV"] || "").toLowerCase().includes(termo) ||
          (i["DESCRICAO ITEM CARDAPIO"] || "").toLowerCase().includes(termo)
        );
      }
      mostrarItens(filtrados);
    }
  </script>
</body>
</html>
